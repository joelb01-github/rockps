(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(e,t,a){e.exports=a(332)},148:function(e,t,a){},188:function(e,t){},190:function(e,t){},253:function(e,t){},254:function(e,t){},330:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(136),c=a.n(s),u=(a(148),a(150),a(30)),l=a(31),o=a(34),i=a(32),p=a(35),m=a(338),d=a(339),E=a(340),y=a(341),h=a(342),b=a(21),f=a(333),O=a(334),T=a(335),v=a(336),g=a(337),x=a(33),M="FINALISE_GAME_REQUEST",N="RESET_GAME_REQUEST",j="FETCH_PLAYERS_REQUEST",D="PLAYERS_FAILED",C="UPDATE_PLAYERS",w="UPDATE_PLAYER",A="UPDATE_PLAYER_ACT",I="UPDATE_PLAYER_PL2",L="FETCH_STATUS_REQUEST",R="STATUS_FAILED",_="UPDATE_STATUS",S="UPDATE_STATUS_COUNT",k="UPDATE_STATUS_FINALISED",P="UPDATE_STATUS_ACT",U="UPDATE_STATUS_TIMER",V="SUBMIT_COMMIT_REQUEST",G="REVEAL_COMMIT_REQUEST",F="REVEAL_COMMIT_FAILED",Y={NOT_COMMITTED:"Has not picked his/her choice yet",COMMITTED:"Has sent his/her commitment"},B={NOT_REVEALED:"Has not revealed his/her choice yet",REVEALED:"Has revealed his/her choice"},W={SENDING:"Sending transaction...",SENT:"Transaction sent!",NONE:"",RESET:"Resetting the game...",FINAL:"Finalising the game...",PENDING:"Waiting for the other player..."},H={NEUTRAL:"0x0000000000000000000000000000000000000000",RESET:"game reset",NOT_PLAYED:"game not played yet",DRAW:"draw"},Q="N/A",J=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleChangeChoice=function(e){0===a.props.index?a.setState({choices:[e.target.value,a.state.choices[1]]}):a.setState({choices:[a.state.choices[0],e.target.value]})},a.handleChangeNounce=function(e){0===a.props.index?a.setState({nounces:[e.target.value,a.state.nounces[1]]}):a.setState({nounces:[a.state.nounces[0],e.target.value]})},a.handleChoice=function(e){return a.state.choices[e]},a.handleNounce=function(e){return a.state.nounces[e]},a.handleSubmit=function(e){e.preventDefault(),"commit"===a.props.type?a.props.submitCommit(a.props.index,a.state.choices[a.props.index],a.state.nounces[a.props.index],a.props.player):a.props.revealCommit(a.props.index,a.state.choices[a.props.index],a.state.nounces[a.props.index],a.props.player),0===a.props.index?a.setState({nounces:["",a.state.nounces[1]]}):a.setState({nounces:[a.state.nounces[0],""]})},a.state={choices:[0,0],nounces:[0,0]},a.handleChangeChoice=a.handleChangeChoice.bind(Object(b.a)(Object(b.a)(a))),a.handleChangeNounce=a.handleChangeNounce.bind(Object(b.a)(Object(b.a)(a))),a.handleChoice=a.handleChoice.bind(Object(b.a)(Object(b.a)(a))),a.handleNounce=a.handleNounce.bind(Object(b.a)(Object(b.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(Object(b.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(O.a,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(T.a,null,r.a.createElement(v.a,{for:"choice"},"Pick a choice"),r.a.createElement(g.a,{type:"select",id:"choice",name:"choice",value:this.handleChoice(this.props.index),onChange:function(t){return e.handleChangeChoice(t)}},r.a.createElement("option",{value:"0"},"Rock"),r.a.createElement("option",{value:"1"},"Paper"),r.a.createElement("option",{value:"2"},"Scissor")),r.a.createElement(v.a,{for:"nounce"},"Pick a secret number"),r.a.createElement(g.a,{type:"text",id:"nounce",name:"nounce",value:this.handleNounce(this.props.index),onChange:function(t){return e.handleChangeNounce(t)},placeholder:"your secret number"})),r.a.createElement(function(){return e.props.player.act===W.SENDING?r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,null,"Commit")},null))}}]),t}(n.Component),q=Object(x.b)(null,function(e){return{submitCommit:function(t,a,n,r){return e({type:V,payload:{index:t,choice:a,nounce:n,player:r}})},revealCommit:function(t,a,n,r){return e({type:G,payload:{index:t,choice:a,nounce:n,player:r}})}}})(J),$=function(e){return r.a.createElement(d.a,null,r.a.createElement(E.a,{tag:"h4"},e.name),r.a.createElement("div",null,r.a.createElement(E.a,{tag:"h6"},"Phase 1: Commit"),r.a.createElement(y.a,null,r.a.createElement(function(e){var t=e.index,a=e.player;return a.status1===Y.NOT_COMMITTED?r.a.createElement(q,{index:t,type:"commit",player:a}):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,a.status1),r.a.createElement(m.a,null,"Contract used: ",a.addr))},{index:e.index,player:e.player}))),r.a.createElement("div",null,r.a.createElement(E.a,{tag:"h6"},"Phase 2: Reveal"),r.a.createElement(y.a,null,r.a.createElement(function(e){var t=e.index,a=e.player;return a.status1===Y.COMMITTED&&a.status2===B.NOT_REVEALED&&a.pl2status1===Y.COMMITTED?r.a.createElement(q,{index:t,type:"reveal",player:a}):a.pl2status1===Y.NOT_COMMITTED?r.a.createElement(m.a,null,W.PENDING):r.a.createElement(m.a,null,a.status2)},{index:e.index,player:e.player}))),r.a.createElement(h.a,{className:"text-muted"},r.a.createElement(function(e){var t=e.player;return t.act!==W.NONE?r.a.createElement("span",{className:"action"}," ",t.act," "):r.a.createElement(r.a.Fragment,null," ")},{player:e.player})))},z=a(343),K=function(e,t){var a=Date.now()/1e3;return console.log(a),console.log(e+t),console.log(t),console.log(e),a>e+t?0:Math.floor(e+t-a)},X=function(e){return e.players[0].status2===B.REVEALED&&e.players[1].status2!==B.REVEALED||e.players[1].status2===B.REVEALED&&e.players[0].status2!==B.REVEALED?K(e.revealTime,e.maxTime)>0?r.a.createElement("div",null,r.a.createElement("p",{className:"action"},"1st commit revealed on ",new Date(e.revealTime).toLocaleString("en-GB")),r.a.createElement("p",{className:"action"},"2nd reveal to happen before the next ",K(e.revealTime,e.maxTime)," seconds")):r.a.createElement("div",{className:"action"},r.a.createElement("p",null,"Time's up !"),r.a.createElement("p",null,"It's too late for the second player to reveal...")):r.a.createElement("div",null)},Z=a(140),ee=new(a.n(Z).a)(window.web3.currentProvider),te="0x136856154904671e0f60ee535d6f8c324a1364de",ae=new ee.eth.Contract([{constant:!1,inputs:[{name:"newTimer",type:"uint256"}],name:"changeTimer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"commit",type:"bytes32"}],name:"enterCommitment",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"finaliseGame",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"resetGame",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"choice",type:"uint256"},{name:"nounce",type:"uint256"}],name:"reveal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!0,inputs:[],name:"firstRevealTime",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"gameCount",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getPlayerCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getPlayers",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getRevealed",outputs:[{name:"",type:"bool[2]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getTimeLeft",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"latestWinner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"candidate",type:"address"}],name:"notAlreadyIn",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"requiredValue",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"reward",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"timer",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],te),ne=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).handleFinalSubmit=function(){return a.props.finaliseGame()},a.handleReset=function(){return a.props.resetGame()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchGameStatus()}},{key:"render",value:function(){var e=this,t=function(){return e.props.players[0].status2===B.REVEALED&&e.props.players[1].status2===B.REVEALED?r.a.createElement("p",{className:"lead"},r.a.createElement(f.a,{color:"primary",onClick:function(){return e.handleFinalSubmit()}},"Check winner")," "):r.a.createElement("div",null)},a=function(){return r.a.createElement("p",{className:"lead"},r.a.createElement(f.a,{color:"primary",onClick:function(){return e.handleReset()}},"Reset Game")," ")};return this.props.gameIsLoading?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h4",null,"Game status"),r.a.createElement("p",{className:"action"},"Loading game status...")),r.a.createElement("hr",{className:"my-2"})):this.props.gameErrMsg?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h4",null,"Game status"),r.a.createElement("p",{className:"action"},this.props.gameErrMsg),r.a.createElement("p",{className:"action"},"Reload this page to get latest status and try again...")),r.a.createElement("hr",{className:"my-2"})):this.props.playersErrMsg?r.a.createElement("div",null," ",r.a.createElement("p",{className:"action"},"Error...")," "):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h4",null,"Game status"),r.a.createElement("p",null,"Contract deployed on Rinkeby at: ",te),r.a.createElement("p",null,"Last game winner: ",this.props.status.last),r.a.createElement("p",null,"Currently ",this.props.status.playerCount," players have committed their choice."),r.a.createElement(function(){return e.props.playersIsLoading?r.a.createElement("p",{className:"action"},"Loading players status..."):e.props.status.act!==W.NONE?r.a.createElement("p",{className:"action"},e.props.status.act):r.a.createElement("div",null," ",r.a.createElement(t,null)," ",r.a.createElement(a,null)," ")},null),r.a.createElement(X,{revealTime:this.props.status.revealTime,maxTime:this.props.status.maxTime,players:this.props.players})),r.a.createElement("hr",{className:"my-2"}))}}]),t}(n.Component),re=Object(x.b)(function(e){return{status:e.gameStatus.status,gameIsLoading:e.gameStatus.gameIsLoading,gameErrMsg:e.gameStatus.gameErrMsg,players:e.players.players,playersIsLoading:e.players.playersIsLoading,playersErrMsg:e.players.playersErrMsg}},function(e){return{finaliseGame:function(){return e({type:M})},resetGame:function(){return e({type:N})},fetchGameStatus:function(){return e({type:L})}}})(ne),se=function(){return r.a.createElement("div",null,r.a.createElement("h1",{className:"display-3"},"Rock Paper Scissor"),r.a.createElement("hr",{className:"my-2"}))},ce=function(){return r.a.createElement("div",null,r.a.createElement("h4",null,"Instructions"),r.a.createElement("p",null,"Have Metamask installed (change account for each player)"),r.a.createElement("p",null,"1) Commit 2) Reveal 3) Finish"))},ue=function(){return r.a.createElement(z.a,null,r.a.createElement(se,null),r.a.createElement(re,null),r.a.createElement(ce,null))},le=function(){return r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),r.a.createElement("p",{className:"action"},"Loading . . ."))},oe=function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchPlayers()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(ue,null),r.a.createElement(function(){return e.props.playersIsLoading?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(le,null))):e.props.playersErrMsg?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",{className:"action"},e.props.playersErrMsg),r.a.createElement("p",null,"Refresh this page to load latest game status from Rinkeby and try again"))):r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-10 col-md-5 m-auto"},r.a.createElement($,{name:"Alice",index:0,player:e.props.players[0]})),r.a.createElement("div",{className:"col-10 col-md-5 m-auto"},r.a.createElement($,{name:"Bob",index:1,player:e.props.players[1]})))},null))}}]),t}(n.Component),ie=Object(x.b)(function(e){return{players:e.players.players,playersIsLoading:e.players.playersIsLoading,playersErrMsg:e.players.playersErrMsg}},function(e){return{fetchPlayers:function(){return e({type:j})}}})(oe),pe=a(27),me=a(142),de=a(8),Ee=a(6),ye=a.n(Ee),he=a(10),be=a(40),fe=function(){var e=Object(be.a)(ye.a.mark(function e(){var t,a,n,r;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=parseInt,e.next=3,ae.methods.getPlayerCount().call();case 3:return e.t1=e.sent,t=(0,e.t0)(e.t1),e.next=7,ae.methods.getPlayers().call();case 7:a=e.sent,n=[],e.t2=t,e.next=0===e.t2?12:1===e.t2?15:2===e.t2?18:23;break;case 12:return n.push({addr:Q,status1:Y.NOT_COMMITTED,pl2status1:Y.NOT_COMMITTED,status2:B.NOT_REVEALED,act:W.NONE}),n.push({addr:Q,status1:Y.NOT_COMMITTED,pl2status1:Y.NOT_COMMITTED,status2:B.NOT_REVEALED,act:W.NONE}),e.abrupt("break",23);case 15:return n.push({addr:a[0],status1:Y.COMMITTED,pl2status1:Y.NOT_COMMITTED,status2:B.NOT_REVEALED,act:W.NONE}),n.push({addr:Q,status1:Y.NOT_COMMITTED,pl2status1:Y.COMMITTED,status2:B.NOT_REVEALED,act:W.NONE}),e.abrupt("break",23);case 18:return e.next=20,ae.methods.getRevealed().call();case 20:return(r=e.sent)[0]&&r[1]?(n.push({addr:a[0],status1:Y.COMMITTED,pl2status1:Y.COMMITTED,status2:B.REVEALED,act:W.NONE}),n.push({addr:a[1],status1:Y.COMMITTED,pl2status1:Y.COMMITTED,status2:B.REVEALED,act:W.NONE})):r[0]||r[1]?r[0]?(n.push({addr:a[0],status1:Y.COMMITTED,pl2status1:Y.COMMITTED,status2:B.REVEALED,act:W.NONE}),n.push({addr:a[1],status1:Y.COMMITTED,pl2status1:Y.COMMITTED,status2:B.NOT_REVEALED,act:W.NONE})):(n.push({addr:a[0],status1:Y.COMMITTED,pl2status1:Y.COMMITTED,status2:B.NOT_REVEALED,act:W.NONE}),n.push({addr:a[1],status1:Y.COMMITTED,pl2status1:Y.COMMITTED,status2:B.REVEALED,act:W.NONE})):(n.push({addr:a[0],status1:Y.COMMITTED,pl2status1:Y.COMMITTED,status2:B.NOT_REVEALED,act:W.NONE}),n.push({addr:a[1],status1:Y.COMMITTED,pl2status1:Y.COMMITTED,status2:B.NOT_REVEALED,act:W.NONE})),e.abrupt("break",23);case 23:return e.abrupt("return",n);case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(be.a)(ye.a.mark(function e(t){var a,n,r,s;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.eth.getAccounts();case 2:return a=e.sent,n=t.choice,r=t.nounce,s=ee.utils.soliditySha3(n,r),e.next=8,ae.methods.enterCommitment(s).send({from:a[0],value:1e3});case 8:return e.abrupt("return",a[0]);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(be.a)(ye.a.mark(function e(t){var a,n,r;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.eth.getAccounts();case 2:return a=e.sent,n=t.choice,r=t.nounce,e.next=7,ae.methods.reveal(n,r).send({from:a[0]});case 7:return e.t0=parseInt,e.next=10,ae.methods.firstRevealTime().call();case 10:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(be.a)(ye.a.mark(function e(){var t,a,n,r,s,c,u,l;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.methods.latestWinner().call();case 2:return t=e.sent,e.t0=parseInt,e.next=6,ae.methods.gameCount().call();case 6:return e.t1=e.sent,a=(0,e.t0)(e.t1),n=H.NOT_PLAYED,0!==a&&(n=t===H.NEUTRAL?H.DRAW:t),e.t2=parseInt,e.next=14,ae.methods.getPlayerCount().call();case 14:return e.t3=e.sent,r=(0,e.t2)(e.t3),s=!1,e.next=19,ae.methods.getPlayers().call();case 19:if(2!==e.sent.length){e.next=25;break}return e.next=23,ae.methods.getRevealed().call();case 23:(c=e.sent)[0]&&c[1]&&(s=!0);case 25:return e.t4=parseInt,e.next=28,ae.methods.firstRevealTime().call();case 28:return e.t5=e.sent,u=(0,e.t4)(e.t5),e.t6=parseInt,e.next=33,ae.methods.timer().call();case 33:return e.t7=e.sent,l=(0,e.t6)(e.t7),e.abrupt("return",{canBeFinalised:s,playerCount:r,last:n,act:W.NONE,revealTime:u,maxTime:l});case 36:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),ge=function(){return[{addr:Q,status1:Y.NOT_COMMITTED,pl2status1:Y.NOT_COMMITTED,status2:B.NOT_REVEALED,act:W.NONE},{addr:Q,status1:Y.NOT_COMMITTED,pl2status1:Y.NOT_COMMITTED,status2:B.NOT_REVEALED,act:W.NONE}]},xe=function(e){return{playerCount:0,canBeFinalised:"No",last:e,act:W.NONE,revealTime:0}},Me=function(){},Ne=function(){var e=Object(be.a)(ye.a.mark(function e(){var t,a;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.eth.getAccounts();case 2:return t=e.sent,e.next=5,ae.methods.finaliseGame().send({from:t[0]});case 5:return e.next=7,ae.methods.latestWinner().call();case 7:return a=e.sent,e.abrupt("return",a===H.NEUTRAL?H.DRAW:a);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(be.a)(ye.a.mark(function e(){var t;return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.eth.getAccounts();case 2:return t=e.sent,e.next=5,ae.methods.resetGame().send({from:t[0]});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),De=ye.a.mark(Ge),Ce=ye.a.mark(Fe),we=ye.a.mark(Ye),Ae=ye.a.mark(Be),Ie=ye.a.mark(We),Le=ye.a.mark(He),Re=ye.a.mark(Qe),_e=ye.a.mark(Je),Se=ye.a.mark(qe),ke=ye.a.mark($e),Pe=ye.a.mark(ze),Ue=ye.a.mark(Ke),Ve=ye.a.mark(Xe);function Ge(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(M,Fe);case 2:case"end":return e.stop()}},De,this)}function Fe(){var e,t,a;return ye.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(he.c)({type:P,payload:W.FINAL});case 3:return n.next=5,Object(he.b)(Ne);case 5:return e=n.sent,t=xe(e),n.next=9,Object(he.c)({type:_,payload:t});case 9:return a=ge(),n.next=12,Object(he.c)({type:C,payload:a});case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(0),n.next=18,Object(he.c)({type:R,payload:n.t0.message});case 18:case"end":return n.stop()}},Ce,this,[[0,14]])}function Ye(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(N,Be);case 2:case"end":return e.stop()}},we,this)}function Be(){var e,t;return ye.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(he.c)({type:P,payload:W.RESET});case 3:return a.next=5,Object(he.b)(je);case 5:return e=xe(H.RESET),a.next=8,Object(he.c)({type:_,payload:e});case 8:return t=ge(),a.next=11,Object(he.c)({type:C,payload:t});case 11:a.next=17;break;case 13:return a.prev=13,a.t0=a.catch(0),a.next=17,Object(he.c)({type:R,payload:a.t0.message});case 17:case"end":return a.stop()}},Ae,this,[[0,13]])}function We(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(G,He);case 2:case"end":return e.stop()}},Ie,this)}function He(e){var t,a,n;return ye.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(he.c)({type:A,payload:{index:e.payload.index,act:W.SENDING}});case 3:return r.next=5,Object(he.b)(Te,e.payload);case 5:return t=r.sent,a=Object(de.a)({},e.payload.player,{act:W.SENT,status2:B.REVEALED}),r.next=9,Object(he.c)({type:w,payload:{index:e.payload.index,status:a}});case 9:return r.next=11,Object(he.c)({type:U,payload:t});case 11:return n=Me(),r.next=14,Object(he.c)({type:k,payload:n});case 14:r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(0),r.next=20,Object(he.c)({type:F,payload:r.t0.message});case 20:case"end":return r.stop()}},Le,this,[[0,16]])}function Qe(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(V,Je);case 2:case"end":return e.stop()}},Re,this)}function Je(e){var t,a,n;return ye.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(he.c)({type:A,payload:{index:e.payload.index,act:W.SENDING}});case 3:return r.next=5,Object(he.b)(Oe,e.payload);case 5:return t=r.sent,a=Object(de.a)({},e.payload.player,{addr:t,act:W.SENT,status1:Y.COMMITTED}),r.next=9,Object(he.c)({type:w,payload:{index:e.payload.index,status:a}});case 9:return n=0===e.payload.index?1:0,r.next=12,Object(he.c)({type:I,payload:{index:n,status:Y.COMMITTED}});case 12:return r.next=14,Object(he.c)({type:S});case 14:r.next=20;break;case 16:return r.prev=16,r.t0=r.catch(0),r.next=20,Object(he.c)({type:D,payload:r.t0.message});case 20:case"end":return r.stop()}},_e,this,[[0,16]])}function qe(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(j,$e);case 2:case"end":return e.stop()}},Se,this)}function $e(){var e;return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(he.b)(fe);case 3:return e=t.sent,t.next=6,Object(he.c)({type:C,payload:e});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(he.c)({type:D,payload:t.t0.message});case 12:case"end":return t.stop()}},ke,this,[[0,8]])}function ze(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.d)(L,Ke);case 2:case"end":return e.stop()}},Pe,this)}function Ke(){var e;return ye.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(he.b)(ve);case 3:return e=t.sent,t.next=6,Object(he.c)({type:_,payload:e});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(he.c)({type:R,payload:t.t0.message});case 12:case"end":return t.stop()}},Ue,this,[[0,8]])}function Xe(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(he.a)([Ge(),Ye(),qe(),ze(),Qe(),We()]);case 2:case"end":return e.stop()}},Ve,this)}var Ze=function(e,t){switch(t.type){case w:switch(t.payload.index){case 0:return[t.payload.status,e[1]];case 1:return[e[0],t.payload.status];default:return e}case A:switch(t.payload.index){case 0:return[Object(de.a)({},e[0],{act:t.payload.act}),e[1]];case 1:return[e[0],Object(de.a)({},e[1],{act:t.payload.act})];case 2:return[Object(de.a)({},e[0],{act:t.payload.act}),Object(de.a)({},e[1],{act:t.payload.act})];default:return e}case"UPDATE_PLAYER_ST1":switch(t.payload.index){case 0:return[Object(de.a)({},e[0],{status1:t.payload.status1}),e[1]];case 1:return[e[0],Object(de.a)({},e[1],{status1:t.payload.status1})];default:return e}case"UPDATE_PLAYER_ST2":switch(t.payload.index){case 0:return[Object(de.a)({},e[0],{status2:t.payload.status2}),e[1]];case 1:return[e[0],Object(de.a)({},e[1],{status2:t.payload.status2})];default:return e}case"UPDATE_PLAYER_ADDR":switch(t.payload.index){case 0:return[Object(de.a)({},e[0],{addr:t.payload.addr}),e[1]];case 1:return[e[0],Object(de.a)({},e[1],{addr:t.payload.addr})];default:return e}case I:switch(t.payload.index){case 0:return[Object(de.a)({},e[0],{pl2status1:t.payload.status}),e[1]];case 1:return[e[0],Object(de.a)({},e[1],{pl2status1:t.payload.status})];default:return e}default:return e}},et=Object(pe.c)({gameStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gameIsLoading:!0,gameErrMsg:null,status:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(de.a)({},e,{gameIsLoading:!0,gameErrMsg:null,status:null});case _:return Object(de.a)({},e,{gameIsLoading:!1,gameErrMsg:null,status:t.payload});case R:return Object(de.a)({},e,{gameIsLoading:!1,gameErrMsg:t.payload,status:null});case S:return Object(de.a)({},e,{gameIsLoading:!1,gameErrMsg:null,status:Object(de.a)({},e.status,{playerCount:e.status.playerCount+1})});case k:return Object(de.a)({},e,{gameIsLoading:!1,gameErrMsg:null,status:Object(de.a)({},e.status,{canBeFinalised:t.payload})});case P:return Object(de.a)({},e,{gameIsLoading:!1,gameErrMsg:null,status:Object(de.a)({},e.status,{act:t.payload})});case U:return Object(de.a)({},e,{gameIsLoading:!1,gameErrMsg:null,status:Object(de.a)({},e.status,{revealTime:t.payload})});default:return e}},players:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{playersIsLoading:!0,playersErrMsg:null,players:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(de.a)({},e,{playersIsLoading:!0,playersErrMsg:null,players:[]});case D:return Object(de.a)({},e,{playersIsLoading:!1,playersErrMsg:t.payload,players:[]});case C:return Object(de.a)({},e,{playersIsLoading:!1,playersErrMsg:null,players:t.payload});case w:case A:case"UPDATE_PLAYER_ST1":case"UPDATE_PLAYER_ST2":case"UPDATE_PLAYER_ADDR":case I:return Object(de.a)({},e,{playersIsLoading:!1,playersErrMsg:null,players:Ze(e.players,t)});default:return e}}}),tt=a(141),at=a.n(tt),nt=(a(330),function(){var e=Object(me.a)(),t=Object(pe.e)(et,Object(pe.d)(Object(pe.a)(at.a,e)));return e.run(Xe),t}()),rt=function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(x.a,{store:nt},r.a.createElement("div",{className:"App"},r.a.createElement(ie,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(rt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[143,2,1]]]);
//# sourceMappingURL=main.d248f106.chunk.js.map