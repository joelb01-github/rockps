(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){e.exports=a(302)},124:function(e,t,a){},128:function(e,t,a){},162:function(e,t){},164:function(e,t){},227:function(e,t){},228:function(e,t){},302:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),r=a(112),l=a.n(r),u=(a(124),a(21)),c=a.n(u),i=a(58),o=a(42),p=a(41),d=a(113),h=a(114),m=a(117),y=a(115),b=a(118),f=a(20),v=(a(128),a(116)),E=new(a.n(v).a)(window.web3.currentProvider),w=new E.eth.Contract([{constant:!1,inputs:[{name:"choice",type:"uint8"}],name:"enterAndInput",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"finaliseGame",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!0,inputs:[],name:"getPlayerCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getPlayers",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"latestWinner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],"0x4d33bbdaafd478beae4ec7fc8d590c2a99c70c5b"),g=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(y.a)(t).call(this,e))).handleChange=function(e,t){var n="input"+t;a.setState(Object(p.a)({},n,e.target.value))},a.handleValue=function(e){var t="input"+e;return a.state[t]},a.handleSubmit=function(){var e=Object(o.a)(c.a.mark(function e(t,n){var s,r,l,u,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),e.t0=t,e.next=0===e.t0?4:1===e.t0?6:8;break;case 4:return a.setState({players:[Object(i.a)({},a.state.players[0],{status:"Sending transaction..."}),a.state.players[1]]}),e.abrupt("break",8);case 6:return a.setState({players:[a.state.players[0],Object(i.a)({},a.state.players[1],{status:"Sending transaction..."})]}),e.abrupt("break",8);case 8:return e.next=10,E.eth.getAccounts();case 10:return s=e.sent,r=0===t?a.state.input0:a.state.input1,e.next=14,w.methods.enterAndInput(r).send({from:s[0]});case 14:l=0===t?[{addr:s[0],status:"Transaction sent!"},a.state.players[1]]:[a.state.players[0],{addr:s[0],status:"Transaction sent!"}],u=a.state.playerCount+1,o=2===u?"Yes":"No",a.setState({players:l,playerCount:u,canBeFinalised:o});case 18:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a.onClikFinal=Object(o.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.eth.getAccounts();case 2:return t=e.sent,a.setState({canBeFinalised:"Fetching winner... "}),e.next=6,w.methods.finaliseGame().send({from:t[0]});case 6:return e.next=8,w.methods.latestWinner().call();case 8:n=e.sent,a.setState({players:[{addr:"N/A",status:"has not played yet"},{addr:"N/A",status:"has not played yet"}],playerCount:0,canBeFinalised:"...No",input0:-1,input1:-1,last:n});case 10:case"end":return e.stop()}},e,this)})),a.state={players:[{addr:"...loading",status:"...loading"},{addr:"...loading",status:"...loading"}],playerCount:0,canBeFinalised:"...loading",input0:-1,input1:-1,last:"...loading"},a.handleChange=a.handleChange.bind(Object(f.a)(Object(f.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(c.a.mark(function e(){var t,a,n,s,r,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=parseInt,e.next=3,w.methods.getPlayerCount().call();case 3:return e.t1=e.sent,t=(0,e.t0)(e.t1),e.next=7,w.methods.getPlayers().call();case 7:return a=e.sent,e.next=10,w.methods.latestWinner().call();case 10:n=e.sent,s="0x0000000000000000000000000000000000000000"===n?"game not played yet":n,r=[],e.t2=t,e.next=0===e.t2?16:1===e.t2?19:2===e.t2?22:25;break;case 16:return r.push({addr:"N/A",status:"has not played yet"}),r.push({addr:"N/A",status:"has not played yet"}),e.abrupt("break",25);case 19:return r.push({addr:a[0],status:"has already played"}),r.push({addr:"N/A",status:"has not played yet"}),e.abrupt("break",25);case 22:return r.push({addr:a[0],status:"has already played"}),r.push({addr:a[1],status:"has already played"}),e.abrupt("break",25);case 25:l=2===t?"Yes":"No",this.setState({players:r,playerCount:t,canBeFinalised:l,last:s});case 28:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=function(t){return s.a.createElement("div",null,s.a.createElement("h4",null,t.name,"' side"),s.a.createElement("p",null,t.name,"' status: ",s.a.createElement("span",{className:"js"},e.state.players[t.index].status)),s.a.createElement("p",null,"Contract used: ",s.a.createElement("span",{className:"js"},e.state.players[t.index].addr)),s.a.createElement("form",{onSubmit:function(a){return e.handleSubmit(t.index,a)}},s.a.createElement("label",null,"Pick player's choice "),s.a.createElement("input",{type:"text",value:e.handleValue(t.index),onChange:function(a){return e.handleChange(a,t.index)}}),s.a.createElement("button",null,"Send choice")),s.a.createElement("h2",null,e.state.messageAlice))};return s.a.createElement("div",{className:"App"},s.a.createElement(function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Rock Paper Scissor Game"),s.a.createElement("div",null,s.a.createElement("p",null,"Choose for both Alice and Bob (one after the other) what they should play"),s.a.createElement("p",null,"When the 2 players have sent their choice (button 'Send choice'), you can finalise the game (button 'Check winner')")),s.a.createElement("div",null,s.a.createElement("h2",null,"Game status"),s.a.createElement("p",null,"Currently ",s.a.createElement("span",{className:"js"},e.state.playerCount)," players have submitted their choice."),s.a.createElement("p",null,"Is the game ready to be finalised? ",s.a.createElement("span",{className:"js"},e.state.canBeFinalised)),s.a.createElement("p",null,"Latest winner: ",s.a.createElement("span",{className:"js"},e.state.last)),s.a.createElement("button",{onClick:e.onClikFinal},"Check winner")),s.a.createElement("h2",null,"Let's play..."))},null),s.a.createElement(t,{name:"Alice",index:0}),s.a.createElement(t,{name:"Bob",index:1}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[119,2,1]]]);
//# sourceMappingURL=main.c0ea225c.chunk.js.map